изначальная функция была слишком громоздкой и исполняла два разных действия в одной